<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CasaConnect â€” Search</title>
    <link rel="stylesheet" href="common_style.css" />

    <style>
        .footer-nav .item-link,
        .footer-nav .item-link:visited,
        .footer-nav .item-link:hover,
        .footer-nav .item-link:focus,
        .footer-nav .item-link:active {
            text-decoration: none;
        }


        .phone {
            display: flow-root;
            padding-bottom: 78px;
        }

        .topbar+.container {
            margin-top: 20px;
        }

        .btn-back {
            background: var(--accent, #111);
            color: #fff;
            border: 0;
            border-radius: 8px;
            padding: 8px 14px;
            font-weight: 700;
            cursor: pointer;
        }

        .container {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }


        .search-bar {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 12px;
            align-items: center;
            width: 100%;
        }

        .search-input {
            height: 44px;
            background: #e6e6e6;
            border: 0;
            border-radius: 12px;
            padding: 0 14px;
            font: inherit;
            color: #111;
            outline: none;
        }

        .btn-search {
            background: #111;
            color: #fff;
            border: 0;
            border-radius: 10px;
            padding: 10px 16px;
            font-weight: 800;
            cursor: pointer;
            min-width: 120px;
            text-decoration: none;
        }

        .section-title {
            font-weight: 700;
            font-size: 16px;
            border-left: 4px solid #000;
            padding-left: 8px;
            margin: 6px 0;
        }

        /* post lists */
        .post {
            width: 100%;
            border: 1px solid var(--drop, #e5e5e5);
            border-radius: 14px;
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            background: var(--panel, #fff);
            cursor: pointer;
            transition: box-shadow .06s ease, transform .06s ease;
        }

        .post:hover {
            box-shadow: 0 6px 18px rgba(0, 0, 0, .06);
        }

        .post:active {
            transform: translateY(1px);
        }

        .post-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
        }


        .skel-input {
            background: #e6e6e6;
            border-radius: 12px;
            padding: 8px 12px;
            color: #606060;
            font-size: 14px;
            line-height: 1;
            display: inline-block;
        }

        .post-body {
            display: grid;
            grid-template-columns: 1fr 120px;
            gap: 12px;
        }

        .media {
            height: 200px;
            border-radius: 10px;
            background: #777;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 10px;
        }

        .meta {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .skel-chip {
            background: #efefef;
            border: 1px solid var(--drop, #e5e5e5);
            border-radius: 12px;
            padding: 10px 12px;
            font-size: 14px;
            color: #606060;
            text-align: center;
        }

        .spacer {
            height: 2px;
            background: #eee;
            margin: 6px 0;
        }

        @media (max-width:393px) {
            .post-body {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body class="with-footer">
    <!-- nav bar -->
    <div class="footer-nav">
        <div class="footer-item">
            <a class="item-link" href="home.html">
                <div data-svg-wrapper data-size="48">
                    <svg width="48" height="49" viewBox="0 0 48 49" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M18 44.5V24.5H30V44.5M6 18.5L24 4.5L42 18.5V40.5C42 41.5609 41.5786 42.5783 40.8284 43.3284C40.0783 44.0786 39.0609 44.5 38 44.5H10C8.93913 44.5 7.92172 44.0786 7.17157 43.3284C6.42143 42.5783 6 41.5609 6 40.5V18.5Z"
                            stroke="#1E1E1E" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </div>
                <div class="footer-label">HOME<br /></div>
            </a>
        </div>
        <div class="footer-item">
            <a class="item-link" href="additem.html">
                <div data-svg-wrapper data-size="48">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="49" viewBox="0 0 48 49" fill="none">
                        <path
                            d="M22 34.5H26V26.5H34V22.5H26V14.5H22V22.5H14V26.5H22V34.5ZM24 44.5C21.2333 44.5 18.6333 43.9833 16.2 42.95C13.7667 41.8833 11.65 40.45 9.85 38.65C8.05 36.85 6.61667 34.7333 5.55 32.3C4.51667 29.8667 4 27.2667 4 24.5C4 21.7333 4.51667 19.1333 5.55 16.7C6.61667 14.2667 8.05 12.15 9.85 10.35C11.65 8.55 13.7667 7.13333 16.2 6.1C18.6333 5.03333 21.2333 4.5 24 4.5C26.7667 4.5 29.3667 5.03333 31.8 6.1C34.2333 7.13333 36.35 8.55 38.15 10.35C39.95 12.15 41.3667 14.2667 42.4 16.7C43.4667 19.1333 44 21.7333 44 24.5C44 27.2667 43.4667 29.8667 42.4 32.3C41.3667 34.7333 39.95 36.85 38.15 38.65C36.35 40.45 34.2333 41.8833 31.8 42.95C29.3667 43.9833 26.7667 44.5 24 44.5ZM24 40.5C28.4667 40.5 32.25 38.95 35.35 35.85C38.45 32.75 40 28.9667 40 24.5C40 20.0333 38.45 16.25 35.35 13.15C32.25 10.05 28.4667 8.5 24 8.5C19.5333 8.5 15.75 10.05 12.65 13.15C9.55 16.25 8 20.0333 8 24.5C8 28.9667 9.55 32.75 12.65 35.85C15.75 38.95 19.5333 40.5 24 40.5Z"
                            fill="#1D1B20" />
                    </svg>
                </div>
                <div class="footer-label">ADD<br /></div>
            </a>
        </div>
        <div class="footer-item">
            <a class="item-link" href="profile.html">
                <div data-svg-wrapper>
                    <svg width="48" height="49" viewBox="0 0 48 49" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M40 42.5V38.5C40 36.3783 39.1571 34.3434 37.6569 32.8431C36.1566 31.3429 34.1217 30.5 32 30.5H16C13.8783 30.5 11.8434 31.3429 10.3431 32.8431C8.84285 34.3434 8 36.3783 8 38.5V42.5M32 14.5C32 18.9183 28.4183 22.5 24 22.5C19.5817 22.5 16 18.9183 16 14.5C16 10.0817 19.5817 6.5 24 6.5C28.4183 6.5 32 10.0817 32 14.5Z"
                            stroke="#1E1E1E" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M8 42.5H39.5" stroke="black" stroke-width="4" />
                    </svg>
                </div>
                <div class="footer-label">PROFILE</div>
            </a>
        </div>
    </div>

    <!-- main body -->
    <div class="screen">
        <main class="phone">
            <div class="topbar">
                <button class="btn-back" type="button" onclick="smartBack()">Back</button>
            </div>

            <div class="container">
                <!-- search bar -->
                <form class="search-bar" role="search" aria-label="Search posts" onsubmit="return false;">
                    <input class="search-input" type="search" placeholder="search by item" autocomplete="off" />
                    <button class="btn-search" type="button">Search</button>
                </form>

                <h2 class="section-title">Search results</h2>

                <!-- search result samples -->
                <section id="results" class="results" aria-live="polite">
                    <article class="post js-open-detail" tabindex="0" role="button" aria-label="Open post detail">
                        <div class="post-head">
                            <div class="skel-input" style="width:180px;">post title</div>
                        </div>
                        <div class="post-body">
                            <div class="media">image / description</div>
                            <div class="meta">
                                <div class="skel-chip">favorites</div>
                                <div class="skel-chip">username</div>
                                <div class="skel-chip">time posted</div>
                            </div>
                        </div>
                    </article>

                    <div class="spacer"></div>

                    <article class="post js-open-detail" tabindex="0" role="button" aria-label="Open post detail">
                        <div class="post-head">
                            <div class="skel-input" style="width:180px;">post title</div>
                        </div>
                        <div class="post-body">
                            <div class="media">image / description</div>
                            <div class="meta">
                                <div class="skel-chip">favorites</div>
                                <div class="skel-chip">username</div>
                                <div class="skel-chip">time posted</div>
                            </div>
                        </div>
                    </article>
                </section>
            </div>
        </main>
    </div>

    <script>

        function smartBack() {
            const params = new URLSearchParams(location.search);
            const from = params.get("from");
            const base = location.pathname.replace(/[^\/]+$/, "");
            const map = { profile: "profile_revised.html", home: "home.html", posts: "search.html" };

            if (from && map[from]) { location.href = base + map[from]; return; }

            const sameOriginRef =
                document.referrer && (() => { try { return new URL(document.referrer).origin === location.origin } catch { return false } })();
            const isAdd = (url) => /(additem\.html|addroommate\.html)$/.test(new URL(url, location.origin).pathname);

            if (sameOriginRef && document.referrer && !isAdd(document.referrer)) {
                location.href = document.referrer; return;
            }
            const lastNonAdd = sessionStorage.getItem('lastNonAdd');
            if (lastNonAdd && !isAdd(lastNonAdd) && lastNonAdd !== location.href) {
                location.href = lastNonAdd; return;
            }
            location.href = base + "home.html";
        }

        // post button ---- singlePage
        function openDetail() {
            const base = location.pathname.replace(/[^\/]+$/, "");
            location.href = base + "singlePage.html";
        }
        document.querySelectorAll('.js-open-detail').forEach(el => {
            el.addEventListener('click', openDetail);
            el.addEventListener('keydown', e => { if (e.key === 'Enter') openDetail(); });
        });
    </script>
</body>

</html>